<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="/img/logo.jpg" type="image/x-icon" />
    <title>Orders - Dream Admin</title>
    <link type="text/css" href="/css/admin/admin.css" rel="stylesheet" />


    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>


    <!-- Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
</head>

<body ng-app="order_app" ng-controller="order_ctrl" class="sb-nav-fixed">
<div th:replace="~{/admin/component/header.html}"></div>
<div id="layoutSidenav">
    <div id="layoutSidenav_nav">
        <div th:replace="~{/admin/component/sidebar.html}"></div>
    </div>
    <div id="layoutSidenav_content">
        <main>
            <div class="row justify-content-between align-items-center" style="margin: 20px auto;">
                <div class="d-flex col-md-3">
                    <div class="form-group mb-0 me-3">
                        <label for="categoryFilter" class="fw-bold pt-1" style="font-size: 16px;">
                            <label for="categoryFilter" class="fw-bold pt-1" style="font-size: 16px;">
                                Filter by Status:
                            </label>
                        </label>
                    </div>
                    <div class="form-group mb-0" style="width: 150px;">
                        <select class="form-control" id="statusFilter" ng-model="selectedStatus"
                                ng-options="s.id as s.name for s in status" ng-change="selectedStatusChanged()">
                        </select>
                    </div>
                </div>
                <!-- Thanh tìm kiếm ở góc phải -->
                <div class="col-md-2 ms-auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search..." aria-label="Search"
                               aria-describedby="basic-addon2" ng-model="searchKeyword"
                               ng-change="searchByStatusAndUsername()">
                    </div>
                </div>
            </div>
            <!-- Bảng cho trạng thái  -->
            <div class="card" style="border-radius: 0px; margin-bottom: 40px;" id="order">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0 text-primary"> <i class="fas fa-table me-1"></i> Orders</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="button-container" style="margin-top: 10px !important;">
                            <a type="button" class="btn btn-danger">
                                <i class="bi bi-filetype-pdf"></i> PDF
                            </a>
                            <a type="button" class="btn btn-success">
                                <i class="bi bi-arrow-down-circle-fill"></i> Excel
                            </a>
                        </div>
                        <table class="table table-hover table-bordered text-center order-datatable">
                            <thead class="table-dark">
                            <th style="width: 80px;">Number</th>
                            <th>ID</th>
                            <th>CreateDate</th>
                            <th>CreateTime</th>
                            <th>Fullname</th>
                            <th style="width: 450px;">Address</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Action</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="order in pagerOrder.paginatedList">
                                <td>{{$index + 1}}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.createDate | date: 'dd-MM-yyyy'}}</td>
                                <td>{{order.createTime}}</td>
                                <td>{{order.fullname}}</td>
                                <td>{{order.address}}</td>
                                <td>{{order.totalAmount | number : 0}} đ</td>
                                <td ng-if="order.status === 1">Ordered</td>
                                <td>
                                    <button class="btn btn-primary"
                                            ng-click="updateOrder.confirmOrder(order.id,2)">Confirm</button>
                                    <button class="btn btn-danger"
                                            ng-click="updateOrder.cancelOrder(order.id,5)">Cancel</button>
                                    <button class="btn btn-dark" ng-click="selectOrder(order.id)"
                                            data-bs-toggle="modal" data-bs-target="#confirmModal">
                                        <i class="bi bi-eye-fill"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-repeat-end></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center pt-2 pb-0">
                        <div class="fw-normal" style="font-size: 18px;">
                            Showing {{ pagerOrder.startIndex }} to {{ pagerOrder.endIndex }} of {{
                            pagerOrder.totalItems }} entries
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-end">
                                <li class="page-item" ng-class="{ 'disabled': pagerOrder.currentPage === 1 }">
                                    <a class="page-link" href="#" ng-click="setPageOrder(1)" aria-disabled="true">
                                        <i class="bi bi-caret-left-fill"></i>
                                    </a>
                                </li>
                                <li class="page-item" ng-repeat="page in pagerOrder.pages">
                                    <a class="page-link" href="#" ng-click="setPageOrder(page)"
                                       ng-class="{ active: pagerOrder.currentPage === page }">{{ page }}</a>
                                </li>
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrder.currentPage === pagerOrder.totalPages }">
                                    <a class="page-link" href="#" ng-click="setPageOrder(pagerOrder.totalPages)">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

            </div>
            <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <i class="bi bi-pencil-square pe-2"></i>
                                Orders
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container hs-hd mx-auto">
                                <h5 class="title-hs col-md-12">Bill</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Order ID:</h6>
                                            <p>{{listOrder[0].id_order}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Order Date:</h6>
                                            <p>{{listOrder[0].order_createDate | date:'dd-MM-yyyy'}}</p>
                                        </div>
                                        <!-- Thêm thông tin khác nếu cần -->
                                    </div>
                                </div>
                            </div>
                            <div class="container hs-hd mx-auto" style="margin-top: 30px;">
                                <h5 class="title-hs col-md-12">Delivery address</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Full Name:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Phone Number:</h6>
                                            <p>{{listOrder[0].account_phone}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Address:</h6>
                                            <p>{{listOrder[0].order_address}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container" style="margin-top: 30px; padding: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-details">
                                            <thead class="table-dark">
                                            <tr>
                                                <th>Number</th>
                                                <th>Image</th>
                                                <th>Product Name</th>
                                                <th>Quantity</th>
                                                <th>Size</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="orderDetail in listOrder">
                                                <td>{{$index + 1}}</td>
                                                <td><img ng-src="{{'/img/gallery/' + orderDetail.product_image}}"
                                                         class="img-fluid img-details"></td>
                                                <td>{{orderDetail.product_name}}</td>
                                                <td>{{orderDetail.quantity}}</td>
                                                <td ng-if="orderDetail.id_size === 1">S</td>
                                                <td ng-if="orderDetail.id_size === 2">M</td>
                                                <td ng-if="orderDetail.id_size === 3">L</td>
                                                <td>{{orderDetail.price | number : 0}} đ</td>
                                                <td>
                                                    {{orderDetail.quantity * orderDetail.price | number :0}} đ
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Subtotal:</strong></td>
                                                <td>{{getSubTotal() | number : 0}} VND</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total Payment:</strong>
                                                </td>
                                                <th class="text-success">{{getTotal() | number : 0}} VND</th>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2" style="font-size: 20px;">
                                <label for="confirmOrderStatus" class="form-label fw-bold mb-3">
                                    Order Status:</label>
                                <span class="fw-bold text-primary ps-1">Ordered</span>
                            </div>
                            <!-- Add more input fields here based on your table columns -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bảng cho trạng thái confirm -->
            <div class="card" style="border-radius: 0px; margin-bottom: 40px;" id="order-confirm">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="text-info mb-0"> <i class="fas fa-table me-1"></i> Processing</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="button-container" style="margin-top: 10px !important;">
                            <a type="button" class="btn btn-danger">
                                <i class="bi bi-filetype-pdf"></i> PDF
                            </a>
                            <a type="button" class="btn btn-success">
                                <i class="bi bi-arrow-down-circle-fill"></i> Excel
                            </a>
                        </div>
                        <table class="table table-hover table-bordered text-center order-datatable">
                            <thead class="table-dark">
                            <th>Number</th>
                            <th>ID</th>
                            <th>CreateDate</th>
                            <th>Fullname</th>
                            <th>Address</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="order in pagerOrderProcessing.paginatedList">
                                <td>{{$index + 1 }}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.createDate | date: 'dd-MM-yyyy'}}</td>
                                <td>{{order.fullname}}</td>
                                <td>{{order.address}}</td>
                                <td>{{order.totalAmount | number : 0}} đ</td>
                                <td ng-if="order.status === 2">Confirmed</td>
                                <td>
                                    <button class="btn btn-info"
                                            ng-click="updateOrder.shippingOrder(order.id,3)">Ship</button>
                                    <button class="btn btn-dark" data-bs-toggle="modal"
                                            ng-click="selectOrder(order.id)" data-bs-target="#processingModal">
                                        <i class="bi bi-eye-fill"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-repeat-end></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center pt-2 pb-0">
                        <div class="fw-normal" style="font-size: 18px;">
                            Showing {{ pagerOrderProcessing.startIndex }} to {{ pagerOrderProcessing.endIndex }} of
                            {{ pagerOrderProcessing.totalItems }} entries
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-end">
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderProcessing.currentPage === 1 }">
                                    <a class="page-link" href="#" ng-click="setPageOrderProcessing(1)"
                                       aria-disabled="true">
                                        <i class="bi bi-caret-left-fill"></i>
                                    </a>
                                </li>
                                <li class="page-item" ng-repeat="page in pagerOrderProcessing.pages">
                                    <a class="page-link" href="#" ng-click="setPageOrderProcessing(page)"
                                       ng-class="{ active: pagerOrderProcessing.currentPage === page }">{{ page
                                        }}</a>
                                </li>
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderProcessing.currentPage === pagerOrderProcessing.totalPages }">
                                    <a class="page-link" href="#"
                                       ng-click="setPageOrderProcessing(pagerOrderProcessing.totalPages)">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="processingModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <i class="bi bi-pencil-square pe-2"></i>
                                Processing
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container hs-hd mx-auto">
                                <h5 class="title-hs col-md-12">Invoice</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Order ID:</h6>
                                            <p>#{{listOrder.id_order}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Order Date:</h6>
                                            <p>{{listOrder[0].order_createDate | date:'dd-MM-yyyy'}}</p>
                                        </div>
                                        <!-- Add additional information if needed -->
                                    </div>
                                </div>
                            </div>
                            <div class="container hs-hd mx-auto" style="margin-top: 30px;">
                                <h5 class="title-hs col-md-12">Delivery address</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Full name:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Phone number:</h6>
                                            <p>{{listOrder[0].account_phone}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Address:</h6>
                                            <p>{{listOrder[0].order_address}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container" style="margin-top: 30px; padding: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-details">
                                            <thead class="table-dark">
                                            <tr>
                                                <th>Number</th>
                                                <th>Image</th>
                                                <th>Product Name</th>
                                                <th>Quantity</th>
                                                <th>Size</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="orderDetail in listOrder">
                                                <td>{{$index + 1}}</td>
                                                <td><img ng-src="{{'/img/gallery/' + orderDetail.product_image}}"
                                                         class="img-fluid img-details"></td>
                                                <td>{{orderDetail.product_name}}</td>
                                                <td>{{orderDetail.quantity}}</td>
                                                <td ng-if="orderDetail.id_size === 1">S</td>
                                                <td ng-if="orderDetail.id_size === 2">M</td>
                                                <td ng-if="orderDetail.id_size === 3">L</td>
                                                <td>{{orderDetail.price | number : 0}} đ</td>
                                                <td>{{orderDetail.quantity * orderDetail.price | number :0}}
                                                    đ</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Subtotal:</strong></td>
                                                <td>{{getSubTotal() | number : 0}} VND</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total Payment:</strong>
                                                </td>
                                                <th class="text-success">{{getTotal() | number : 0}} VND</th>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2" style="font-size: 20px;">
                                <label for="processingOrderStatus" class="form-label fw-bold mb-3">
                                    Order Status:</label>
                                <span class="fw-bold text-primary ps-1">Confirmed</span>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bảng cho trạng thái shipping -->
            <div class="card" style="border-radius: 0px; margin-bottom: 40px;" id="order-shipping">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="text-dark mb-0"><i class="fas fa-table me-1"></i> Shipping</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="button-container" style="margin-top: 10px !important;">
                            <a type="button" class="btn btn-danger">
                                <i class="bi bi-filetype-pdf"></i> PDF
                            </a>
                            <a type="button" class="btn btn-success">
                                <i class="bi bi-arrow-down-circle-fill"></i> Excel
                            </a>
                        </div>
                        <table class="table table-hover table-bordered text-center order-datatable">
                            <thead class="table-dark">
                            <th>Number</th>
                            <th>ID</th>
                            <th>CreateDate</th>
                            <th>Fullname</th>
                            <th>Address</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="order in pagerOrderShipping.paginatedList">
                                <td>{{$index +1}}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.createDate | date: 'dd-MM-yyyy'}}</td>
                                <td>{{order.fullname}}</td>
                                <td>{{order.address}}</td>
                                <td>{{order.totalAmount | number : 0}} đ</td>
                                <td ng-if="order.status === 3">Delivering</td>
                                <td>
                                    <button class="btn btn-success"
                                            ng-click="updateOrder.successOrder(order.id,4)">Success</button>
                                    <button class="btn btn-dark" data-bs-toggle="modal"
                                            ng-click="selectOrder(order.id)" data-bs-target="#shippingModal">
                                        <i class="bi bi-eye-fill"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-repeat-end></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center pt-2 pb-0">
                        <div class="fw-normal" style="font-size: 18px;">
                            Showing {{ pagerOrderShipping.startIndex }} to {{ pagerOrderShipping.endIndex }} of {{
                            pagerOrderShipping.totalItems }} entries
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-end">
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderShipping.currentPage === 1 }">
                                    <a class="page-link" href="#" ng-click="setPageOrderShipping(1)"
                                       aria-disabled="true">
                                        <i class="bi bi-caret-left-fill"></i>
                                    </a>
                                </li>
                                <li class="page-item" ng-repeat="page in pagerOrderShipping.pages">
                                    <a class="page-link" href="#" ng-click="setPageOrderShipping(page)"
                                       ng-class="{ active: pagerOrderShipping.currentPage === page }">{{ page
                                        }}</a>
                                </li>
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderShipping.currentPage === pagerOrderShipping.totalPages }">
                                    <a class="page-link" href="#"
                                       ng-click="setPageOrderShipping(pagerOrderShipping.totalPages)">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <!-- Modal Shipping -->
            <div class="modal fade" id="shippingModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <i class="bi bi-pencil-square pe-2"></i>
                                Shipping
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container hs-hd mx-auto">
                                <h5 class="title-hs col-md-12">Invoice</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Order ID:</h6>
                                            <p>#{{listOrder[0].id_order}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Order Date:</h6>
                                            <p>{{listOrder[0].order_createDate | date :'dd-MM-yyyy'}}</p>
                                        </div>
                                        <!-- Thêm thông tin khác nếu cần -->
                                    </div>
                                </div>
                            </div>
                            <div class="container hs-hd mx-auto" style="margin-top: 30px;">
                                <h5 class="title-hs col-md-12">Delivery Address</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Full Name:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Phone Number:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Address:</h6>
                                            <p>{{listOrder[0].order_address}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container" style="margin-top: 30px; padding: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-details">
                                            <thead class="table-dark">
                                            <tr>
                                                <th>Number</th>
                                                <th>Image</th>
                                                <th>Product Name</th>
                                                <th>Quantity</th>
                                                <th>Size</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="orderDetail in listOrder">
                                                <td>{{$index + 1}}</td>
                                                <td><img ng-src="{{'/img/gallery/' + orderDetail.product_image}}"
                                                         class="img-fluid img-details"></td>
                                                <td>{{orderDetail.product_name}}</td>
                                                <td>{{orderDetail.quantity}}</td>
                                                <td ng-if="orderDetail.id_size === 1">S</td>
                                                <td ng-if="orderDetail.id_size === 2">M</td>
                                                <td ng-if="orderDetail.id_size === 3">L</td>
                                                <td>{{orderDetail.price | number : 0}} đ</td>
                                                <td>
                                                    {{orderDetail.quantity * orderDetail.price | number :0}} đ
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Subtotal:</strong></td>
                                                <td>{{getSubTotal() | number : 0}} VND</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total Payment:</strong>
                                                </td>
                                                <th class="text-success">{{getTotal() | number : 0}} VND</th>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2" style="font-size: 20px;">
                                <label for="shippingOrderStatus" class="form-label fw-bold mb-3">
                                    Order Status:</label>
                                <span class="fw-bold text-primary ps-1">Delivering</span>
                            </div>
                            <!-- Add more input fields here based on your table columns -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bảng cho trạng thái success -->
            <div class="card" style="border-radius: 0px; margin-bottom: 40px;" id="order-success">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="text-success mb-0"><i class="fas fa-table me-1"></i> Success</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="button-container" style="margin-top: 10px !important;">
                            <a type="button" class="btn btn-danger">
                                <i class="bi bi-filetype-pdf"></i> PDF
                            </a>
                            <a type="button" class="btn btn-success">
                                <i class="bi bi-arrow-down-circle-fill"></i> Excel
                            </a>
                        </div>
                        <table class="table table-hover table-bordered text-center order-datatable">
                            <thead class="table-dark">
                            <th>Number</th>
                            <th>ID</th>
                            <th>CreateDate</th>
                            <th>Fullname</th>
                            <th>Address</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="order in pagerOrderSuccess.paginatedList">
                                <td>{{$index + 1}}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.createDate | date: 'dd-MM-yyyy'}}</td>
                                <td>{{order.fullname}}</td>
                                <td>{{order.address}}</td>
                                <td ng-if="order.distance !== null">{{order.totalAmount + order.distance * 4 | number : 0}} đ</td>
                                <td ng-if="order.distance === null">{{order.totalAmount | number : 0}} đ</td>
                                <td ng-if="order.status === 4"> Delivered</td>
                                <td>
                                    <button class="btn btn-dark" data-bs-toggle="modal"
                                            ng-click="selectOrder(order.id,4)" data-bs-target="#successModal">
                                        <i class="bi bi-eye-fill"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-repeat-end></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center pt-2 pb-0">
                        <div class="fw-normal" style="font-size: 18px;">
                            Showing {{ pagerOrderSuccess.startIndex }} to {{ pagerOrderSuccess.endIndex }} of {{
                            pagerOrderSuccess.totalItems }} entries
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-end">
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderSuccess.currentPage === 1 }">
                                    <a class="page-link" href="#" ng-click="setPageOrderSuccess(1)"
                                       aria-disabled="true">
                                        <i class="bi bi-caret-left-fill"></i>
                                    </a>
                                </li>
                                <li class="page-item" ng-repeat="page in pagerOrderSuccess.pages">
                                    <a class="page-link" href="#" ng-click="setPageOrderSuccess(page)"
                                       ng-class="{ active: pagerOrderSuccess.currentPage === page }">{{ page }}</a>
                                </li>
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderSuccess.currentPage === pagerOrderSuccess.totalPages }">
                                    <a class="page-link" href="#"
                                       ng-click="setPageOrderSuccess(pagerOrderSuccess.totalPages)">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <!-- Modal Success -->
            <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <i class="bi bi-pencil-square pe-2"></i>
                                Success
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container hs-hd mx-auto">
                                <h5 class="title-hs col-md-12">Invoice</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Order ID:</h6>
                                            <p>#{{listOrder[0].id_order}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Order Date:</h6>
                                            <p>{{listOrder[0].order_createDate | date :'dd-MM-yyyy'}}</p>
                                        </div>
                                        <!-- Thêm thông tin khác nếu cần -->
                                    </div>
                                </div>
                            </div>
                            <div class="container hs-hd mx-auto" style="margin-top: 30px;">
                                <h5 class="title-hs col-md-12">Delivery Address</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Full Name:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Phone Number:</h6>
                                            <p>{{listOrder[0].account_phone}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Address:</h6>
                                            <p>{{listOrder[0].order_address}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container" style="margin-top: 30px; padding: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-details">
                                            <thead class="table-dark">
                                            <tr>
                                                <th>Number</th>
                                                <th>Image</th>
                                                <th>Product Name</th>
                                                <th>Quantity</th>
                                                <th>Size</th>
                                                <th>Price</th>
                                                <th>Total Amount</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="orderDetail in listOrder">
                                                <td>{{$index + 1}}</td>
                                                <td><img ng-src="{{'/img/gallery/' + orderDetail.product_image}}"
                                                         class="img-fluid img-details"></td>
                                                <td>{{orderDetail.product_name}}</td>
                                                <td>{{orderDetail.quantity}}</td>
                                                <td ng-if="orderDetail.id_size === 1">S</td>
                                                <td ng-if="orderDetail.id_size === 2">M</td>
                                                <td ng-if="orderDetail.id_size === 3">L</td>
                                                <td>{{orderDetail.price | number : 0}} đ</td>
                                                <td>
                                                    {{orderDetail.quantity * orderDetail.price | number :0}} đ
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Subtotal:</strong></td>
                                                <td>{{getSubTotal() | number : 0}} đ</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total Payment:</strong>
                                                </td>
                                                <th class="text-success">{{getTotal() | number : 0}} đ</th>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2" style="font-size: 20px;">
                                <label for="successOrderStatus" class="form-label fw-bold mb-3">
                                    Order Status:</label>
                                <span class="fw-bold text-success ps-1">Delivered</span>
                            </div>
                            <!-- Add more input fields here based on your table columns -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bảng cho trạng thái cancel -->
            <div class="card" style="border-radius: 0px; margin-bottom: 30px;" id="order-cancel">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0 text-danger"><i class="fas fa-table me-1"></i> Cancel</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="button-container" style="margin-top: 10px !important;">
                            <a type="button" class="btn btn-danger">
                                <i class="bi bi-filetype-pdf"></i> PDF
                            </a>
                            <a type="button" class="btn btn-success">
                                <i class="bi bi-arrow-down-circle-fill"></i> Excel
                            </a>
                        </div>
                        <table class="table table-hover table-bordered text-center order-datatable">
                            <thead class="table-dark">
                            <th>Number</th>
                            <th>ID</th>
                            <th>CreateDate</th>
                            <th>Fullname</th>
                            <th>Address</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat-start="order in pagerOrderCancel.paginatedList">
                                <td>{{$index + 1 }}</td>
                                <td>{{order.id}}</td>
                                <td>{{order.createDate | date: 'dd-MM-yyyy'}}</td>
                                <td>{{order.fullname}}</td>
                                <td>{{order.address}}</td>
                                <td>{{order.totalAmount | number : 0}} đ</td>
                                <td ng-if="order.status === 5"> Đã hủy</td>
                                <td>
                                    <button class="btn btn-danger"
                                            ng-click="updateOrder.resetOrder(order.id,2)">
                                        Reset
                                    </button>
                                    <button class="btn btn-dark" data-bs-toggle="modal"
                                            ng-click="selectOrder(order.id)" data-bs-target="#cancelModal">
                                        <i class="bi bi-eye-fill"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-repeat-end></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-between align-items-center pt-2 pb-0">
                        <div class="fw-normal" style="font-size: 18px;">
                            Showing {{ pagerOrderCancel.startIndex }} to {{ pagerOrderCancel.endIndex }} of {{
                            pagerOrderCancel.totalItems }} entries
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-end">
                                <li class="page-item" ng-class="{ 'disabled': pagerOrderCancel.currentPage === 1 }">
                                    <a class="page-link" href="#" ng-click="setPageOrderCancel(1)"
                                       aria-disabled="true">
                                        <i class="bi bi-caret-left-fill"></i>
                                    </a>
                                </li>
                                <li class="page-item" ng-repeat="page in pagerOrderCancel.pages">
                                    <a class="page-link" href="#" ng-click="setPageOrderCancel(page)"
                                       ng-class="{ active: pagerOrderCancel.currentPage === page }">{{ page }}</a>
                                </li>
                                <li class="page-item"
                                    ng-class="{ 'disabled': pagerOrderCancel.currentPage === pagerOrderCancel.totalPages }">
                                    <a class="page-link" href="#"
                                       ng-click="setPageOrderCancel(pagerOrderCancel.totalPages)">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <!-- Modal Cancel -->
            <div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <i class="bi bi-pencil-square pe-2"></i>
                                Cancel
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container hs-hd mx-auto">
                                <h5 class="title-hs col-md-12">Invoice</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Order ID:</h6>
                                            <p>#{{listOrder[0].id_order}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Order Date:</h6>
                                            <p>{{listOrder[0].order_createDate | date :'dd-MM-yyyy'}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container hs-hd mx-auto" style="margin-top: 30px;">
                                <h5 class="title-hs col-md-12">Delivery Address</h5>
                                <div class="row">
                                    <div class="col-md-12 cnt-hd">
                                        <div class="info-pair">
                                            <h6>Full Name:</h6>
                                            <p>{{listOrder[0].account_fullname}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Phone Number:</h6>
                                            <p>{{listOrder[0].account_phone}}</p>
                                        </div>
                                        <div class="info-pair">
                                            <h6>Address:</h6>
                                            <p>{{listOrder[0].order_address}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container" style="margin-top: 30px; padding: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-details">
                                            <thead class="table-dark">
                                            <tr>
                                                <th>Number</th>
                                                <th>Image</th>
                                                <th>Product Name</th>
                                                <th>Quantity</th>
                                                <th>Size</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="orderDetail in listOrder">
                                                <td>{{$index + 1}}</td>
                                                <td><img ng-src="{{'/img/gallery/' + orderDetail.product_image}}"
                                                         class="img-fluid img-details"></td>
                                                <td>{{orderDetail.product_name}}</td>
                                                <td>{{orderDetail.quantity}}</td>
                                                <td ng-if="orderDetail.id_size === 1">S</td>
                                                <td ng-if="orderDetail.id_size === 2">M</td>
                                                <td ng-if="orderDetail.id_size === 3">L</td>
                                                <td>{{orderDetail.price | number : 0}} đ</td>
                                                <td>{{orderDetail.quantity * orderDetail.price | number :0}} đ
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Subtotal:</strong></td>
                                                <td>{{getSubTotal() | number : 0}} VND</td>
                                            </tr>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total:</strong></td>
                                                <th class="text-success">{{getTotal() | number : 0}} VND</th>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2" style="font-size: 20px;">
                                <label for="cancelOrderStatus" class="form-label fw-bold mb-3">
                                    Order Status:</label>
                                <span class="fw-bold text-danger ps-1">Canceled</span>
                            </div>
                            <!-- Add more input fields here based on your table columns -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div th:replace="~{/admin/component/footer.html}"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

<script src="/js/admin/order.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>

</body>

</html>